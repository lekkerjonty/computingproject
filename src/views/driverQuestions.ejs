<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Driver Questionnaire</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.png" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link href="css/styles.css" rel="stylesheet" />
        <!-- Custom CSS -->
        <link href="/css/custom.css" rel="stylesheet" />
        <style>
            
        </style>
    </head>
    <body>
        <!-- Responsive navbar-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container justify-content-center">
                <a class="navbar-brand justify-content-center" href="/">Golf Club Recommendations</a>
            </div>
        </nav>
        <!-- Page content-->
        <div class="container">
            <h1 class="mx-auto my-4 text-uppercase ojuju-fonts text-center">Driver Questions</h1>
            <div class="progress mb-4">
                <div id="progress-bar-custom" class="progress-bar-custom" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Success example"></div>
            </div>
            <div id="question-container" class="text-center">
                <p id="question-custom"></p>
                <div id="answer-container"></div>
                <button class="btn btn-primary mt-3" onclick="nextQuestion()">Next</button>
            </div>
            <div id="loading-screen" class="loading-screen">
                <div class="spinner"></div>
                <p>Loading your results...</p>
              </div>
        </div>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script>
            const questions = [
                {
                    type: "radio",
                    question: "What is your budget?",
                    options: ["< £100", "£100 - £300", "£300 - £400", "£400+", "Don't Mind"]
                },
                {
                    type: "radio",
                    question: "What is your average driving carry distance?",
                    options: ["< 200 yards", "200 - 225 yards", "225 - 250 yards", "250 - 275 yards", "> 275 yards"]
                },
                {
                    type: "radio",
                    question: "How would you describe your swing speed?",
                    options: ["Slow", "Average", "Fast"]
                },
                {
                    type: "radio",
                    question: "Do you hit the ball low, medium or high?",
                    options: ["Low", "Medium", "High"]
                },
                {
                    type: "radio",
                    question: "What is your most common shot shape?",
                    options: ["Slice", "Fade", "Straight", "Draw", "Hook"]
                },
                {
                    type: "radio",
                    question: "What is your biggest struggle with your current driver?",
                    options: ["Distance", "Accuracy", "Consistency", "Trajectory", "Feel"]
                },
                {

                    type : "radio",
                    question: "What is your height? in cm",
                    options: ["< 150 cm", "150 - 160 cm", "160 - 170 cm", "170 - 180 cm", "180 - 190 cm", "> 190 cm"]
                },
                {
                    type: "radio",
                    question: "Finally, Is there a specific brand you prefer?",
                    options: ["Titleist", "Callaway", "TaylorMade", "Ping", "Cobra", "Mizuno", "Cleveland", "Srixon", "Wilson", "PXG", "Other/No Preference"]
                }
            ];
            const answers = [];
            let currentQuestionIndex = 0;

            function displayQuestion() {
                const questionObj = questions[currentQuestionIndex];
                document.getElementById('question-custom').innerText = questionObj.question;
                const answerContainer = document.getElementById('answer-container');
                answerContainer.innerHTML = '';

                const radioGroup = document.createElement('div');
                radioGroup.className = 'radio-group-custom';
                questionObj.options.forEach(option => {
                    const div = document.createElement('div');
                    div.className = 'form-check-custom';
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.className = 'form-check-input-custom';
                    input.name = 'radioOptions';
                    input.value = option;
                    const label = document.createElement('label');
                    label.className = 'form-check-label-custom';
                    label.innerText = option;
                    div.appendChild(input);
                    div.appendChild(label);
                    radioGroup.appendChild(div);
                });
                answerContainer.appendChild(radioGroup);

                updateProgressBar();
            }

            function nextQuestion() {
                const selectedOption = document.querySelector('input[name="radioOptions"]:checked');
                if (selectedOption) {
                    answers.push(selectedOption.value);
                    currentQuestionIndex++;
                    if (currentQuestionIndex < questions.length) {
                        displayQuestion();
                    } else {
                        // Show the loading screen
                        showLoadingScreen();

                        // Simulate a delay (e.g., 3 seconds) before redirecting to the results page
                        setTimeout(() => {
                            const queryString = answers
                                .map((ans, index) => `q${index}=${encodeURIComponent(ans)}`)
                                .join('&');
                            window.location.href = `/results?${queryString}`;
                        }, 2000); // 2-second delay
                    }
                } else {
                    alert('Please provide an answer.');
                }
            }

            function showLoadingScreen() {
                const loadingScreen = document.getElementById('loading-screen');
                loadingScreen.classList.add('show'); // Add the "show" class to make it visible
            }

            function updateProgressBar() {
                const progressBar = document.getElementById('progress-bar-custom');
                const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
                progressBar.style.width = progress + '%';
                progressBar.setAttribute('aria-valuenow', progress);
            }

            

            // Display the first question when the page loads
            displayQuestion();
        </script>
    </body>
</html>